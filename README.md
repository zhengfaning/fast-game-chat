# ğŸ® Game Dev Platform - Multi-Game Universal Architecture

![Build Status](https://img.shields.io/badge/build-passing-brightgreen)
![Go Version](https://img.shields.io/badge/go-1.24-blue)
![Architecture](https://img.shields.io/badge/architecture-multi--game-orange)

è¿™æ˜¯ä¸€ä¸ªä¸ºå¤šæ¸¸æˆç¯å¢ƒæ‰“é€ çš„é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„é€šç”¨åç«¯åŸºç¡€è®¾æ–½ã€‚é€šè¿‡ç»Ÿä¸€çš„ç½‘å…³å’ŒèŠå¤©æœåŠ¡ï¼Œæ”¯æŒå¤šä¸ªæ¸¸æˆé¡¹ç›®å¤ç”¨åŒä¸€å¥—åŸºç¡€è®¾æ–½ï¼Œå®ç°ä»£ç å¤ç”¨ã€æ•°æ®éš”ç¦»å’Œæé€Ÿæ¥å…¥ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸŒ **å¿«é€Ÿç½‘å…³ (Gateway)**: åªéœ€è¦è§£ææ¶ˆæ¯å¤´äºŒè¿›åˆ¶åè®®ï¼Œæ”¯æŒå¤šæ¸¸æˆåŠ¨æ€è·¯ç”±ï¼Œå…·å¤‡æé«˜çš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚
- ğŸ’¬ **æ™ºèƒ½èŠå¤©æœåŠ¡ (Chat Service)**: åŸç”Ÿæ”¯æŒå¤šæ¸¸æˆæ•°æ®éš”ç¦»ï¼Œå†…ç½®ç§èŠã€é¢‘é“å¹¿æ’­åŠŸèƒ½ã€‚
- ğŸ›¡ï¸ **æ•°æ®éš”ç¦»**: åŸºäº `game_id` çš„å­˜å‚¨ä¸é€»è¾‘éš”ç¦»ï¼Œç¡®ä¿å„æ¸¸æˆæ•°æ®äº’ä¸å¹²æ‰°ã€‚
- ğŸ“¦ **å¼€ç®±å³ç”¨**: å®Œæ•´çš„ Docker åŒ–ç¯å¢ƒé…ç½®ï¼Œé€šè¿‡ `Makefile` å®ç°ä¸€é”®æµæ°´çº¿ä½œä¸šã€‚
- ğŸ§ª **å‹åŠ›æµ‹è¯•éªŒè¯**: å·²é€šè¿‡å•æœº 1000+ å¹¶å‘ç”¨æˆ·çš„å®æµ‹ï¼Œç³»ç»Ÿè¿è¡Œç¨³å®šã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

é¡¹ç›®çš„æ ¸å¿ƒç†å¿µæ˜¯ **MessageBase + game_id**ã€‚æ‰€æœ‰ä¸šåŠ¡æ¶ˆæ¯ç»§æ‰¿é€šç”¨åŸºç±»ï¼Œç½‘å…³æ ¹æ®æ¶ˆæ¯ä½“ä¸­çš„æ ‡è¯†è¿›è¡Œæ™ºèƒ½è·¯ç”±ã€‚

```text
å®¢æˆ·ç«¯ A (MMO)  â”€â”€â”€â”€â”
                    â”œâ”€â”€â†’ ç»Ÿä¸€ç½‘å…³ (Gateway) â”€â”€â”¬â”€â”€â†’ æ¸¸æˆåç«¯ A (game_id=mmo)
å®¢æˆ·ç«¯ B (Card) â”€â”€â”€â”€â”¤                         â”‚
                    â”‚                         â”œâ”€â”€â†’ æ¸¸æˆåç«¯ B (game_id=card)
å®¢æˆ·ç«¯ C (MOBA) â”€â”€â”€â”€â”˜                         â”‚
                                              â””â”€â”€â†’ ç»Ÿä¸€èŠå¤©æœåŠ¡ (Chat Service)
                                                         (æŒ‰ game_id é€»è¾‘éš”ç¦»)
```

## ğŸ“‚ ç›®å½•ç»“æ„

```text
.
â”œâ”€â”€ docker/                 # Docker åŸºç¡€è®¾æ–½é…ç½® (PG, Redis, etc.)
â”œâ”€â”€ dist/                   # æ„å»ºå‘å¸ƒç›®å½• (è‡ªåŠ¨åŒ–ç”Ÿæˆ)
â”œâ”€â”€ game-gateway/           # é«˜æ€§èƒ½ç½‘å…³æœåŠ¡æºç 
â”œâ”€â”€ game-chat-service/      # é€šç”¨èŠå¤©æœåŠ¡æºç 
â”œâ”€â”€ game-protocols/         # åŸºäº Protobuf çš„è·¨è¯­è¨€åè®®å®šä¹‰
â”œâ”€â”€ scripts/                # å‹åŠ›æµ‹è¯•ä¸è¾…åŠ©å·¥å…·è„šæœ¬
â”œâ”€â”€ docs/                   # è¯¦ç»†çš„è®¾è®¡æ–‡æ¡£ä¸æŠ€æœ¯æ‰‹å†Œ
â””â”€â”€ Makefile                # ç»Ÿä¸€çš„é¡¹ç›®ç®¡ç†å‘½ä»¤
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
ç¡®ä¿æ‚¨çš„æœºå™¨å·²å®‰è£… `docker`, `docker-compose` å’Œ `go`ã€‚

### 2. å¯åŠ¨åŸºç¡€è®¾æ–½
```bash
make docker-up
```

### 3. ç¼–è¯‘å¹¶è¿è¡Œåº”ç”¨
```bash
make release  # ç¼–è¯‘å¹¶æ‰“åŒ…è‡³ dist
make run      # åå°å¯åŠ¨æ‰€æœ‰æœåŠ¡
```

### 4. çŠ¶æ€æ£€æŸ¥
```bash
make docker-ps  # æŸ¥çœ‹å®¹å™¨çŠ¶æ€
make test-db    # æµ‹è¯•æ•°æ®åº“è¿æ¥
make test-redis # æµ‹è¯• Redis è¿æ¥
```

### 5. å‹åŠ›æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
```bash
make test-stress          # é»˜è®¤ 1000 ç”¨æˆ·
make test-stress USERS=500   # è‡ªå®šä¹‰ 500 ç”¨æˆ·
make test-stress USERS=2000  # è‡ªå®šä¹‰ 2000 ç”¨æˆ·
```

## ğŸ› ï¸ ç®¡ç†å‘½ä»¤æ‰‹å†Œ

| å‘½ä»¤ | è¯´æ˜ |
| :--- | :--- |
| `make build` | ç¼–è¯‘æ‰€æœ‰å¾®æœåŠ¡ |
| `make release` | ç¼–è¯‘å¹¶æ‰“åŒ…åˆ° dist ç›®å½•ï¼ˆé…ç½®æ–‡ä»¶ä»…åœ¨ä¸å­˜åœ¨æ—¶å¤åˆ¶ï¼‰ |
| `make run` | åå°å¯åŠ¨æ‰€æœ‰åº”ç”¨æœåŠ¡ |
| `make stop` | åœæ­¢æ‰€æœ‰åº”ç”¨è¿›ç¨‹ |
| `make restart-app` | é‡å¯æ‰€æœ‰åº”ç”¨ |
| `make docker-up` | å¯åŠ¨ Docker åŸºç¡€æœåŠ¡ (PostgreSQL, Redis) |
| `make docker-down` | åœæ­¢ Docker æœåŠ¡ |
| `make docker-logs` | æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¥å¿— |
| `make psql` | è¿›å…¥ PostgreSQL ç»ˆç«¯ |
| `make redis-cli` | è¿›å…¥ Redis ç»ˆç«¯ |
| `make test-db` | æµ‹è¯•æ•°æ®åº“è¿æ¥ |
| `make test-redis` | æµ‹è¯• Redis è¿æ¥ |
| `make test-stress` | è¿è¡Œå‹åŠ›æµ‹è¯•ï¼ˆé»˜è®¤ 1000 ç”¨æˆ·ï¼Œå¯ç”¨ USERS=N è‡ªå®šä¹‰ï¼‰ |
| `make clean` | æ¸…ç†ç¼–è¯‘äº§ç‰©ä¸å‘å¸ƒåŒ… |

## ğŸ“– æŠ€æœ¯æ–‡æ¡£

æ·±å…¥äº†è§£ç³»ç»Ÿç»†èŠ‚ï¼š
- [å¤šæ¸¸æˆé€šç”¨æ¶æ„è®¾è®¡è¯´æ˜](docs/multi_game_architecture.md)
- [é«˜æ€§èƒ½åè®®ä¼˜åŒ–æŒ‡å—](docs/PROTOCOL_OPTIMIZATION.md)
- [ç³»ç»Ÿç»„ä»¶å…³ç³»å›¾ (Architecture)](docs/architecture_diagram.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**ç»´æŠ¤è€…**: Zheng Faning
